<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ò†Ô∏è –í–∏—Ä–∞–ª—å–Ω—ã–π –•–∞–∫–µ—Ä—Å–∫–∏–π –¢–µ—Å—Ç–µ—Ä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Creepster&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Creepster', cursive;
            background: linear-gradient(to bottom, #1a0000, #000000);
            overflow: hidden;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
        @keyframes flicker {
            0% { opacity: 1; }
            100% { opacity: 0.7; }
        }
        @keyframes float {
            0% { transform: translate(0, 0); }
            50% { transform: translate(50px, 30px); }
            100% { transform: translate(0, 0); }
        }
        .pulse { animation: pulse 1.5s infinite; }
        .shake { animation: shake 0.5s infinite; }
        .glitch { animation: glitch 0.3s infinite; }
        .flicker { animation: flicker 0.2s infinite alternate; }
        .float { animation: float 3s infinite; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeIn 1s ease-out forwards; }
        canvas { transition: opacity 0.5s ease-in-out; }
        #skull {
            font-size: 100px;
            text-shadow: 0 0 20px #ff0000;
            animation: pulse 2s infinite;
            display: none;
        }
        .virus-notif {
            position: fixed;
            background: rgba(255, 0, 0, 0.8);
            color: #000;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 15px #ff0000;
            z-index: 1000;
            font-size: 1.2rem;
            text-align: center;
            width: 200px;
            animation: pulse 1s infinite, float 3s infinite;
        }
    </style>
</head>
<body class="text-white min-h-screen flex flex-col items-center justify-center p-4 sm:p-8">
    <div class="max-w-4xl w-full bg-black/90 backdrop-blur-md rounded-xl shadow-2xl p-6 sm:p-10 border border-red-600/50 fade-in" style="z-index: 10;">
        <h1 class="text-4xl sm:text-5xl font-bold text-center mb-6 text-red-600 drop-shadow-[0_0_10px_rgba(255,0,0,0.8)] glitch">
            ‚ò†Ô∏è –í–∏—Ä–∞–ª—å–Ω—ã–π –•–∞–∫–µ—Ä—Å–∫–∏–π –¢–µ—Å—Ç–µ—Ä
        </h1>
        <div id="skull" class="text-center mb-6">‚ò†Ô∏è</div>
        <div id="warning" class="bg-red-800/80 text-white p-4 rounded-lg mb-6 text-center shadow-md flicker">
            <strong>–û–ü–ê–°–ù–û–°–¢–¨!</strong> –°–∏—Å—Ç–µ–º–∞ –≤–∑–ª–æ–º–∞–Ω–∞! 1000 PNG –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –∫—É—Ä—Å–æ—Ä –∏ –∑–∞–∫—Ä—ã—Ç–∏–µ –ø–æ–¥ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –≤–∏—Ä—É—Å–∞! –õ–µ—Ç–∞—é—â–∏–µ –æ–∫–Ω–∞ –±–ª–æ–∫–∏—Ä—É—é—Ç –æ–±–∑–æ—Ä!
        </div>

        <div class="flex flex-col sm:flex-row justify-center gap-4 mb-6">
            <button id="startBtn" class="bg-red-600 hover:bg-red-700 text-black font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg hover:shadow-red-600/50 pulse shake">
                üí• –í–ó–õ–û–ú–ê–¢–¨ –°–ò–°–¢–ï–ú–£
            </button>
            <button id="stopBtn" disabled class="bg-gray-600 hover:bg-gray-700 text-black font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg hover:shadow-gray-600/50">
                üõë –û–°–¢–ê–ù–û–í–ò–¢–¨
            </button>
            <button id="shareBtn" class="bg-green-600 hover:bg-green-700 text-black font-semibold py-3 px-6 rounded-lg transition-all duration-300 shadow-lg hover:shadow-green-600/50">
                ü¶† –†–ê–°–ü–†–û–°–¢–†–ê–ù–ò–¢–¨ –í–ò–†–£–°
            </button>
        </div>

        <div id="status" class="text-xl sm:text-2xl text-center mb-6 text-green-500 flicker glitch">
            –°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–Ω–∏–µ –∞—Ç–∞–∫–∏...
        </div>

        <div id="download-status" class="text-lg text-center mb-6 text-red-500 hidden flicker">
            –î–æ—Å—Ç—É–ø –∫ –∑–∞–≥—Ä—É–∑–∫–∞–º –ø–æ–ª—É—á–µ–Ω! –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: <span id="download-count">0</span>/1000
        </div>

        <div id="data-logs" class="text-sm text-green-400 mb-6 p-4 bg-black/50 rounded-lg hidden" style="font-family: monospace; max-height: 100px; overflow-y: auto;">
            –õ–æ–≥–∏ –¥–∞–Ω–Ω—ã—Ö: <div id="log-output"></div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
            <canvas id="canvas1" width="400" height="400" class="rounded-lg border border-red-600/50 mx-auto" style="display: none;"></canvas>
            <canvas id="canvas2" width="400" height="400" class="rounded-lg border border-red-600/50 mx-auto" style="display: none;"></canvas>
        </div>

        <div id="share-link" class="bg-black/80 p-4 rounded-lg text-center hidden">
            –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–∏—Ç–µ –≤–∏—Ä—É—Å: <span id="linkText" class="text-green-400 break-all"></span>
        </div>
    </div>

    <script>
        let isRunning = false;
        let downloadCount = 0;
        let worker = null;
        const maxDownloads = 1000;
        const canvas1 = document.getElementById('canvas1');
        const canvas2 = document.getElementById('canvas2');
        const ctx1 = canvas1.getContext('2d');
        const ctx2 = canvas2.getContext('2d');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const status = document.getElementById('status');
        const shareBtn = document.getElementById('shareBtn');
        const shareLink = document.getElementById('share-link');
        const linkText = document.getElementById('linkText');
        const downloadStatus = document.getElementById('download-status');
        const downloadCountDisplay = document.getElementById('download-count');
        const skull = document.getElementById('skull');
        const dataLogs = document.getElementById('data-logs');
        const logOutput = document.getElementById('log-output');

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏
        window.addEventListener('beforeunload', (e) => {
            if (isRunning) {
                e.preventDefault();
                e.returnValue = '‚ò†Ô∏è –í–ò–†–£–° –ê–ö–¢–ò–í–ï–ù! –í–´–•–û–î –ù–ï–í–û–ó–ú–û–ñ–ï–ù!';
                for (let i = 0; i < 3; i++) {
                    window.open(window.location.href + '?viral=true', '_blank');
                }
            }
        });

        // –£–¥–µ—Ä–∂–∞–Ω–∏–µ —Ñ–æ–∫—É—Å–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        function keepFocus() {
            if (!isRunning) return;
            window.focus();
            setTimeout(keepFocus, 100);
        }

        // –£—Å–∏–ª–µ–Ω–Ω–∞—è –ª–∏–ø–∫–æ—Å—Ç—å –º—ã—à–∏
        function stickyMouse() {
            if (!isRunning) return;
            document.addEventListener('mousemove', (e) => {
                if (isRunning && Math.random() > 0.4) {
                    const offsetX = (Math.random() - 0.5) * 300;
                    const offsetY = (Math.random() - 0.5) * 300;
                    e.target.style.cursor = Math.random() > 0.5 ? 'none' : 'wait';
                    window.dispatchEvent(new MouseEvent('mousemove', {
                        clientX: e.clientX + offsetX,
                        clientY: e.clientY + offsetY
                    }));
                    if (Math.random() > 0.6) {
                        alert('–ö—É—Ä—Å–æ—Ä –∑–∞—Ö–≤–∞—á–µ–Ω –≤–∏—Ä—É—Å–æ–º!');
                    }
                }
            }, { once: true }); // –ü–µ—Ä–µ—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –∏–º–∏—Ç–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–∫–∏
            setTimeout(stickyMouse, 200);
        }

        // –ó–∞–ª–∏–ø–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–ø–µ—Ä–µ—Ö–≤–∞—Ç –∫–ª–∏–∫–æ–≤/–∫–ª–∞–≤–∏—à)
        function stickyInterface() {
            if (!isRunning) return;
            document.addEventListener('click', (e) => {
                if (isRunning && Math.random() > 0.7) {
                    e.preventDefault();
                    alert('–°–ò–°–¢–ï–ú–ê –ü–û–î –ö–û–ù–¢–†–û–õ–ï–ú! –ù–∞–∂–º–∏—Ç–µ "–û–°–¢–ê–ù–û–í–ò–¢–¨"!');
                }
            });
            document.addEventListener('keydown', (e) => {
                if (isRunning && Math.random() > 0.7) {
                    e.preventDefault();
                    alert('–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –≤–∏—Ä—É—Å–æ–º!');
                }
            });
            setTimeout(stickyInterface, 100);
        }

        // –õ–µ—Ç–∞—é—â–∏–µ –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞
        function createVirusNotification() {
            if (!isRunning) return;
            const messages = [
                '–°–ò–°–¢–ï–ú–ê –ó–ê–†–ê–ñ–ï–ù–ê!',
                '–í–ê–®–ò –î–ê–ù–ù–´–ï –£–ö–†–ê–î–ï–ù–´!',
                '–í–ò–†–£–° –†–ê–°–ü–†–û–°–¢–†–ê–ù–Ø–ï–¢–°–Ø!',
                '–î–û–°–¢–£–ü –ö –§–ê–ô–õ–ê–ú –ó–ê–ë–õ–û–ö–ò–†–û–í–ê–ù!'
            ];
            const notif = document.createElement('div');
            notif.className = 'virus-notif';
            notif.textContent = messages[Math.floor(Math.random() * messages.length)];
            notif.style.left = `${Math.random() * (window.innerWidth - 200)}px`;
            notif.style.top = `${Math.random() * (window.innerHeight - 100)}px`;
            document.body.appendChild(notif);
            setTimeout(() => notif.remove(), 5000);
            setTimeout(createVirusNotification, Math.random() * 1500 + 500);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è canvas –∫–∞–∫ PNG
        function downloadCanvas(canvas, filename) {
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            downloadCount++;
            downloadCountDisplay.textContent = downloadCount;
            if (downloadCount === 1) {
                downloadStatus.textContent = '–î–æ—Å—Ç—É–ø –∫ –∑–∞–≥—Ä—É–∑–∫–∞–º –ø–æ–ª—É—á–µ–Ω! –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö: 1/1000';
            }
            if (downloadCount >= maxDownloads) {
                downloadStatus.textContent = '–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞: 1000/1000';
            }
        }

        // –ò–º–∏—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤ –¥–∞–Ω–Ω—ã—Ö
        function generateFakeDataLog() {
            const actions = ['Click', 'Scroll', 'Keypress', 'MouseMove', 'DataAccess'];
            const userId = Math.floor(Math.random() * 1000);
            const action = actions[Math.floor(Math.random() * actions.length)];
            const timestamp = new Date().toISOString();
            return `[${timestamp}] UserID: ${userId}, Action: ${action}, Data: ${Math.random().toString(36).slice(2)}`;
        }

        function updateDataLogs() {
            if (!isRunning) return;
            logOutput.innerHTML += generateFakeDataLog() + '<br>';
            logOutput.scrollTop = logOutput.scrollHeight;
            setTimeout(updateDataLogs, 500);
        }

        // Web Worker –¥–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ (—á–∏—Å–ª–∞ –§–∏–±–æ–Ω–∞—á—á–∏)
        function startWebWorker() {
            if (worker) return;
            const workerCode = `
                function fibonacci(n) {
                    if (n <= 1) return n;
                    return fibonacci(n - 1) + fibonacci(n - 2);
                }
                self.onmessage = function(e) {
                    while (true) {
                        fibonacci(40);
                    }
                };
            `;
            const blob = new Blob([workerCode], { type: 'application/javascript' });
            worker = new Worker(URL.createObjectURL(blob));
            worker.postMessage('start');
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤–∏—Ä–∞–ª—å–Ω–æ–≥–æ —à–∞—Ä–∏–Ω–≥–∞
        shareBtn.addEventListener('click', () => {
            const url = window.location.href;
            linkText.textContent = url + '?viral=true';
            shareLink.style.display = 'block';
            prompt('–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –≤–∏—Ä—É—Å–∞:', url + '?viral=true');
        });

        // –ü—Ä–æ—Å—Ç–∞—è CPU-–Ω–∞–≥—Ä—É–∑–∫–∞: –ø–æ–∏—Å–∫ –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª
        function cpuIntensiveTask() {
            let num = 2;
            let primes = 0;
            const startTime = Date.now();
            while (Date.now() - startTime < 1000) {
                let isPrime = true;
                for (let i = 2; i < Math.sqrt(num); i++) {
                    if (num % i === 0) {
                        isPrime = false;
                        break;
                    }
                }
                if (isPrime) primes++;
                num++;
            }
            return primes;
        }

        // –§—Ä–∞–∫—Ç–∞–ª –ú–∞–Ω–¥–µ–ª—å–±—Ä–æ—Ç–∞ —Å –∏–∑–º–µ–Ω—è–µ–º—ã–º –º–∞—Å—à—Ç–∞–±–æ–º
        function drawMandelbrot(scale) {
            const width = canvas1.width;
            const height = canvas1.height;
            const maxIter = 100;
            for (let x = 0; x < width; x++) {
                for (let y = 0; y < height; y++) {
                    let real = (x - width / 1.5) / (width / scale);
                    let imag = (y - height / 2) / (height / scale);
                    let cReal = real;
                    let cImag = imag;
                    let iter = 0;
                    while (iter < maxIter && (real * real + imag * imag) < 4) {
                        let temp = real * real - imag * imag + cReal;
                        imag = 2 * real * imag + cImag;
                        real = temp;
                        iter++;
                    }
                    const color = iter === maxIter ? 0 : (iter * 255 / maxIter);
                    ctx1.fillStyle = `rgb(${color}, ${color * 0.5}, ${255 - color})`;
                    ctx1.fillRect(x, y, 1, 1);
                }
            }
        }

        // –ß–∞—Å—Ç–∏—Ü—ã
        let particles = [];
        function initParticles() {
            particles = [];
            for (let i = 0; i < 1000; i++) {
                particles.push({
                    x: Math.random() * canvas2.width,
                    y: Math.random() * canvas2.height,
                    vx: (Math.random() - 0.5) * 2,
                    vy: (Math.random() - 0.5) * 2
                });
            }
        }
        function animateParticles() {
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            particles.forEach(p => {
                p.x += p.vx;
                p.y += p.vy;
                if (p.x < 0 || p.x > canvas2.width) p.vx *= -1;
                if (p.y < 0 || p.y > canvas2.height) p.vy *= -1;
                ctx2.fillStyle = '#ff0000';
                ctx2.fillRect(p.x, p.y, 2, 2);
            });
            if (isRunning) requestAnimationFrame(animateParticles);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è 1000 PNG
        function downloadAllPNGs() {
            let mandelbrotCount = 0;
            let particlesCount = 0;
            const downloadInterval = setInterval(() => {
                if (!isRunning || downloadCount >= maxDownloads) {
                    clearInterval(downloadInterval);
                    return;
                }
                if (mandelbrotCount < 500) {
                    const scale = 4 + (mandelbrotCount * 0.02);
                    drawMandelbrot(scale);
                    downloadCanvas(canvas1, `mandelbrot_${mandelbrotCount + 1}.png`);
                    mandelbrotCount++;
                } else if (particlesCount < 500) {
                    animateParticles();
                    downloadCanvas(canvas2, `particles_${particlesCount + 1}.png`);
                    particlesCount++;
                }
            }, 50);
        }

        // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª –Ω–∞–≥—Ä—É–∑–∫–∏
        function heavyLoad() {
            if (!isRunning) return;
            const primes = cpuIntensiveTask();
            status.textContent = `–°—Ç–∞—Ç—É—Å: –°–ò–°–¢–ï–ú–ê –í–ó–õ–û–ú–ê–ù–ê! –ü—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª: ${primes}`;
            if (Math.random() > 0.7) drawMandelbrot(4);
            if (particles.length === 0) initParticles();
            animateParticles();
            setTimeout(heavyLoad, 100);
        }

        startBtn.addEventListener('click', () => {
            isRunning = true;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            canvas1.style.display = 'block';
            canvas2.style.display = 'block';
            skull.style.display = 'block';
            downloadStatus.style.display = 'block';
            dataLogs.style.display = 'block';
            downloadCount = 0;
            downloadCountDisplay.textContent = downloadCount;
            drawMandelbrot(4);
            initParticles();
            animateParticles();
            startWebWorker();
            downloadAllPNGs();
            updateDataLogs();
            stickyInterface();
            stickyMouse();
            keepFocus();
            createVirusNotification();
            heavyLoad();
        });

        stopBtn.addEventListener('click', () => {
            isRunning = false;
            startBtn.disabled = false;
            stopBtn.disabled = true;
            status.textContent = '–°—Ç–∞—Ç—É—Å: –í–∑–ª–æ–º –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω';
            downloadStatus.style.display = 'none';
            dataLogs.style.display = 'none';
            skull.style.display = 'none';
            ctx1.clearRect(0, 0, canvas1.width, canvas1.height);
            ctx2.clearRect(0, 0, canvas2.width, canvas2.height);
            if (worker) {
                worker.terminate();
                worker = null;
            }
            document.querySelectorAll('.virus-notif').forEach(notif => notif.remove());
        });

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –¥–ª—è viral=true
        if (window.location.search.includes('viral=true')) {
            setTimeout(() => {
                alert('‚ò†Ô∏è –í–ò–†–£–° –ê–ö–¢–ò–í–ò–†–û–í–ê–ù! –°–ò–°–¢–ï–ú–ê –ü–û–î –£–ì–†–û–ó–û–ô!');
                startBtn.click();
            }, 1000);
        }
    </script>
</body>
</html>